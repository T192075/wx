require("../common/vendor.js"),(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/pack/wenwu-detail/index"],{5969:function(e,n,t){t.r(n);var o=t("655f"),i=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n.default=i.a},"655f":function(e,n,t){(function(e){var o=t("4ea4"),i=t("7037");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("9523")),a=o(t("278c")),c=t("26cb"),l=t("ed08"),u=o(t("5d2d")),s=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var t=d(n);if(t&&t.has(e))return t.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=r?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(o,a,c):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}(t("3c18"));function d(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:n})(e)}function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,r.default)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.default={components:{slidePanel:function(){Promise.all([t.e("common/vendor"),t.e("pages/components/slide-panel/index")]).then(function(){return resolve(t("1881"))}.bind(null,t)).catch(t.oe)},actionBar:function(){Promise.all([t.e("common/vendor"),t.e("pages/components/action-bar/index")]).then(function(){return resolve(t("8218"))}.bind(null,t)).catch(t.oe)},commonTitle:function(){Promise.all([t.e("common/vendor"),t.e("pages/components/common-title/index")]).then(function(){return resolve(t("2370"))}.bind(null,t)).catch(t.oe)}},data:function(){return{pageMeta:{name:"文物详情",category:"通用",type:"详情页",column:"",plate:""},attrArray:[],ready:!1,slideOpen:!1,location:null,currentIndex:0,is_collect:!1,info:{}}},onLoad:function(e){var n=this.handleSceneToQueryArr(e.scene),t=(0,a.default)(n,1)[0];this.id=e.id||e.code||t,this.getDetail()},onShow:function(){},computed:p({},(0,c.mapState)({user:function(e){return e.user.info}})),methods:p(p(p({},(0,c.mapMutations)(["commonUpdate"])),(0,c.mapActions)(["setFavoriteAction"])),{},{handlePreviewImage:function(n){e.previewImage({showmenu:!1,urls:this.info.images,current:n})},handlePreview:function(n){e.previewImage({showmenu:!1,urls:[n]})},swiperChange:function(e){this.currentIndex=e.detail.current},onCollect:function(){this.is_collect=!this.is_collect,this.setFavoriteAction({open_id:this.user.open_id,data_id:this.id||this.info.code,collect_type:1,is_collect:this.is_collect?1:2}),this.is_collect?this.tarEvent("detail_wenwu_collect",{name:this.info.name,id:this.id}):this.tarEvent("detail_wenwu_collect_cancel",{name:this.info.name,id:this.id})},goShare:function(){var n=this.info,t=n.name,o=n.dynasty,i=n.image,r=n.images,a=void 0===r?[]:r;this.commonUpdate({module:"home",type:"shareData",value:{title:t,desc:o,pic:i||a[0],type:"文物",path:"pages/pack/wenwu-detail/index",scene:"".concat(this.id||this.info.code)}}),e.navigateTo({url:"/pages/pack/share/index?id=".concat(this.id||this.info.code)}),this.tarEvent("detail_wenwu_share",{type:"card",name:t,id:this.id||this.info.code})},shareFriend:function(){this.tarEvent("detail_wenwu_share",{type:"friend",name:this.info.name,id:this.id||this.info.code})},onShareAppMessage:function(){return{path:"/pages/pack/wenwu-detail/index?id=".concat(this.id||this.info.code),imageUrl:this.info.image,title:this.info.name}},slideChange:function(e){this.slideOpen=e},getDetail:function(){var e=this;this.is_collect=u.default.get("collect_".concat(this.id),!0);var n={code:this.id,open_id:this.user.open_id};s.wenwuDetail(n).then((function(n){var t=n.data,o=t.note,i=t.code,r=(t.author,t.dynasty),a=t.category,c=t.id,u=t.is_collect,s=e.commonContentParse((0,l.pureHtmlToText)((0,l.htmlDecodeByRegExp)(o)));e.id=c,e.is_collect=1==u,e.setAttrArray({label:"编号",value:i},{label:"分类",value:a},{label:"年代",value:r}),e.info=p(p({},t),{},{content:s}),e.ready=!0}))},setAttrArray:function(){for(var e=[],n=0;n<arguments.length;n++){var t=arguments[n];t.value&&e.push(t)}this.attrArray=e},handleClickImage:function(){e.showToast({title:"暂无图片",icon:"none"})}})}}).call(this,t("543d").default)},b2c5:function(e,n,t){(function(e,n){var o=t("4ea4");t("6cdc"),o(t("66fd"));var i=o(t("cd8f"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(i.default)}).call(this,t("bc2e").default,t("543d").createPage)},b2ff:function(e,n,t){t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return o}));var o={topBar:function(){return Promise.all([t.e("common/vendor"),t.e("pages/components/top-bar/index")]).then(t.bind(null,"6ebb"))},imageView:function(){return Promise.all([t.e("common/vendor"),t.e("pages/components/image-view/index")]).then(t.bind(null,"2ff9"))},tmIcon:function(){return Promise.all([t.e("common/vendor"),t.e("components/tm-icon/index")]).then(t.bind(null,"f4eb"))},tmSpin:function(){return Promise.all([t.e("common/vendor"),t.e("components/tm-spin/index")]).then(t.bind(null,"3c6d"))}},i=function(){var e=this,n=(e.$createElement,e._self._c,e.ready&&e.info.note?e.__map(e.info.content,(function(n,t){return{$orig:e.__get_orig(n),g0:n?e.info.content.length:null}})):null);e.$mp.data=Object.assign({},{$root:{l0:n}})},r=[]},cd8f:function(e,n,t){t.r(n);var o=t("b2ff"),i=t("5969");for(var r in i)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(r);t("907b");var a=t("f0c5"),c=Object(a.a)(i.default,o.b,o.c,!1,null,"33c00d1e",null,!1,o.a,void 0);n.default=c.exports}},[["b2c5","common/runtime","common/vendor","pages/pack/common/vendor"]]]);