(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/index/index"],{"0cf6":function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={topBar:function(){return Promise.all([n.e("common/vendor"),n.e("pages/components/top-bar/index")]).then(n.bind(null,"6ebb"))}},r=function(){this.$createElement;this._self._c},i=[]},8069:function(e,t,n){n.r(t);var o=n("da67"),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t.default=r.a},d537:function(e,t,n){(function(e,t){var o=n("4ea4");n("6cdc"),o(n("66fd"));var r=o(n("f75a"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("bc2e").default,n("543d").createPage)},da67:function(e,t,n){(function(e,o){var r=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("2eee")),a=r(n("c973")),s=r(n("9523")),c=n("26cb"),u=n("7744");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default={components:{openPage:function(){Promise.all([n.e("common/vendor"),n.e("pages/components/open-page/index")]).then(function(){return resolve(n("5d5f"))}.bind(null,n)).catch(n.oe)},commonTitle:function(){Promise.all([n.e("common/vendor"),n.e("pages/components/common-title/index")]).then(function(){return resolve(n("2370"))}.bind(null,n)).catch(n.oe)},zlSection:function(){Promise.all([n.e("common/vendor"),n.e("pages/components/zl-section/index")]).then(function(){return resolve(n("8104"))}.bind(null,n)).catch(n.oe)},activitySection:function(){Promise.all([n.e("common/vendor"),n.e("pages/components/activity-section/index")]).then(function(){return resolve(n("7bfc"))}.bind(null,n)).catch(n.oe)},feedCardList:function(){Promise.all([n.e("common/vendor"),n.e("pages/components/feed-card-list/index")]).then(function(){return resolve(n("ae6e"))}.bind(null,n)).catch(n.oe)},privacyModal:function(){Promise.all([n.e("common/vendor"),n.e("pages/components/privacy-modal/index")]).then(function(){return resolve(n("831f"))}.bind(null,n)).catch(n.oe)},homeTop:function(){Promise.all([n.e("common/vendor"),n.e("pages/components/home-top/index")]).then(function(){return resolve(n("96cc"))}.bind(null,n)).catch(n.oe)}},data:function(){return{pageMeta:{name:"推荐首页",category:"推荐",type:"首页",column:"",plate:""},showOpen:!0,showHome:!1,topBarTitle:"",topBarColor:"",topBarBg:"transparent",bannerList:[],showList:[],feedsList:[],showMore:!0,feedsOptions:{page:1,more:!0,pageSize:4},pull:{},push:{},slideStart:[],moveTime:0,pullLoad:!1,isShowCloseContent:!1,isHideCloseContent:!1,scrollTimer:null}},computed:f({},(0,c.mapState)({isAgreePravicy:function(e){return e.user.isAgreePravicy},isPravicyShown:function(e){return e.user.isPravicyShown},quickEntry:function(e){return e.data.find.quickEntry.slice(2)},banner:function(e){return e.home.banner.map((function(e){return f(f({},e),{},{image:e.image.replace(/http:\/\//g,"https://")})}))},activityHistoryList:function(e){return e.home.activityHistoryRecommend},feeds:function(e){return e.home.feeds},openPageData:function(e){return e.home.openPage},openInfo:function(e){return e.home.openInfo}})),watch:{banner:function(e){e&&e.length>0&&this.setHomeTopBgStyle()}},onLoad:function(t){e.hideTabBar(),this.isAgreePravicy||this.isPravicyShown||this.$refs.privacyModal.show(),this.getData()},onShow:function(){this.setTabBarIndex(0)},onShareAppMessage:function(e){return f(f({},this.$store.state.app.shares),{},{path:"/pages/index/index"})},onReachBottom:function(){this.showMore||this.getFeedsList()},methods:f(f({},(0,c.mapActions)(["getHomeBanner","getHomeFeeds","resetFeeds","getActivityHistoryRecommend","getOpenInfo"])),{},{setHomeTopBgStyle:function(){var e=this;return(0,a.default)(i.default.mark((function t(){var n,o,r,a,s,c,l,d;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],o=0;case 2:if(!(o<e.banner.length)){t.next=15;break}return r=e.banner[o],a=r.image,t.next=7,(0,u.analyze)(a+"?imageMogr2/thumbnail/!1p/ignore-error/1",{scale:1});case 7:s=t.sent,c=s.averageR,l=s.averageG,d=s.averageB,n.push(f(f({},r),{},{style:"linear-gradient(180deg, rgba(".concat(c,", ").concat(l,", ").concat(d,", 0) 0%, rgba(").concat(c,", ").concat(l,", ").concat(d,", 1) 100%);"),themeStyle:"rgba(".concat(c,", ").concat(l,", ").concat(d,", 1)")}));case 12:o++,t.next=2;break;case 15:e.bannerList=n;case 16:case"end":return t.stop()}}),t)})))()},signInHide:function(){},getFeedsList:function(){var e=this;return(0,a.default)(i.default.mark((function t(){var n,o,r,a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.scrollLoadLock){t.next=2;break}return t.abrupt("return");case 2:if(e.scrollLoadLock=!0,n=e.feedsOptions,o=n.more,r=n.page,a=n.pageSize,o){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.getHomeFeeds({page:r,limit:a});case 8:e.feedsOptions.page++,e.feeds.length<r*a&&(e.feedsOptions.more=!1),e.scrollLoadLock=!1,e.pullLoad=!1;case 12:case"end":return t.stop()}}),t)})))()},openPageHide:function(){this.showHome=!0},openPageClose:function(){this.showOpen=!1},close:function(){this.value=!1},getData:function(){var e=this;return(0,a.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getHomeBanner();case 2:return t.next=4,e.getActivityHistoryRecommend();case 4:e.getFeedsList(),e.getOpenInfo();case 6:case"end":return t.stop()}}),t)})))()},touchstart:function(e){this.slideStart=e.touches[0]},touchend:function(e){},onPageScroll:function(e){var t=this;clearTimeout(this.scrollTimer),this.scrollTimer=null,this.scrollTimer=setTimeout((function(){(console.log("滚动停止",e),t.showMore)||(e.scrollTop>940?(t.isShowCloseContent=!0,t.isHideCloseContent=!1):(t.isShowCloseContent=!1,t.isHideCloseContent=!1))}),500)},onLoadMore:function(){this.loadMore()},touchmove:function(e){this.showMore||((null==e?void 0:e.changedTouches[0]).pageY>940?(this.isShowCloseContent=!1,this.isHideCloseContent=!0):(this.isShowCloseContent=!1,this.isHideCloseContent=!1))},onCloseContent:function(){this.feedsOptions={page:2,more:!0,pageSize:4},this.resetFeeds(),this.showMore=!0,this.isShowCloseContent=!1,this.isHideCloseContent=!1},loadMore:function(e){this.pullLoad=!0,this.getFeedsList(),this.showMore=!1},setPinStyle:function(e){e?(o.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#f8f3e8",animation:{duration:300}}),this.topBarTitle="故宫博物院",this.topBarColor="#3b2121",this.topBarBg="#f8f3e8"):(o.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#f8f3e8",animation:{duration:300}}),this.topBarTitle=" ",this.topBarColor="#fff",this.topBarBg="transparent")}})}}).call(this,n("543d").default,n("bc2e").default)},f75a:function(e,t,n){n.r(t);var o=n("0cf6"),r=n("8069");for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("39f5");var a=n("f0c5"),s=Object(a.a)(r.default,o.b,o.c,!1,null,"35a8bfae",null,!1,o.a,void 0);t.default=s.exports}},[["d537","common/runtime","common/vendor"]]]);