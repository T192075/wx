require("../common/vendor.js"),(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/building/list/index"],{"0ae8":function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var r={topBar:function(){return Promise.all([n.e("common/vendor"),n.e("pages/components/top-bar/index")]).then(n.bind(null,"6ebb"))}},i=function(){var e=this,t=(e.$createElement,e._self._c,e.list&&e.list.length);e.$mp.data=Object.assign({},{$root:{g0:t}})},a=[]},"34ab":function(e,t,n){var r=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("2eee")),a=r(n("c973")),o=r(n("9523")),s=n("26cb");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default={components:{searchBar:function(){Promise.all([n.e("common/vendor"),n.e("pages/components/search-bar/index")]).then(function(){return resolve(n("dfb7"))}.bind(null,n)).catch(n.oe)},filterBar:function(){Promise.all([n.e("common/vendor"),n.e("pages/components/filter-bar/index")]).then(function(){return resolve(n("e78f"))}.bind(null,n)).catch(n.oe)},buildingCard:function(){Promise.all([n.e("common/vendor"),n.e("pages/components/building-card/index")]).then(function(){return resolve(n("e67e"))}.bind(null,n)).catch(n.oe)},listEmpty:function(){Promise.all([n.e("common/vendor"),n.e("pages/components/listEmpty/index")]).then(function(){return resolve(n("7da2"))}.bind(null,n)).catch(n.oe)}},data:function(){return{pageMeta:{name:"故宫建筑",category:"游故宫",type:"列表页",column:"故宫建筑",plate:""},loading:!1,listOptions:{page:1,more:!0},searchOption:{page:1,more:!0},buildList:[],filterParams:{},type:"list",page:1,pageSize:10}},computed:l({},(0,s.mapState)({list:function(e){return e.building.buildingList}})),onLoad:function(){this.getList()},onShareAppMessage:function(e){return l({},this.$store.state.app.shares)},methods:l(l({},(0,s.mapActions)(["getBuildingList"])),{},{filterChange:function(e){this.filterParams=e,this.listOptions={page:1,more:!0},this.$refs.searchBar.reset(),this.keyword="",this.searchOption={page:1,more:!0},this.type="list",this.getList()},getList:function(){var e=this;return(0,a.default)(i.default.mark((function t(){var n,r,a,o,s;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.listOptions,r=n.page,a=n.more,o=n.pageSize,s=void 0===o?10:o,!e.loading&&a){t.next=3;break}return t.abrupt("return");case 3:return e.loading=!0,t.next=6,e.getBuildingList({params:l(l({},e.filterParams),{},{page:r,pageSize:s}),type:"list"});case 6:e.list.length<r*s&&(e.listOptions.more=!1),e.listOptions.page++,e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},getSearchList:function(e){var t=this;return(0,a.default)(i.default.mark((function n(){var r,a,o,s,c;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.searchOption,a=r.page,o=r.more,s=r.pageSize,c=void 0===s?10:s,!t.loading&&o){n.next=3;break}return n.abrupt("return");case 3:return t.loading=!0,n.next=6,t.getBuildingList({params:{page:a,pageSize:c,keyword:t.keyword}});case 6:t.list.length<a*c&&(t.searchOption.more=!1),e&&t.handleCommonUma("Um_Event_BuildSearch",{Um_Key_SearchKeyword:t.keyword,Um_key_SearchResult:t.list.length?"有":"无"}),t.searchOption.page++,t.loading=!1;case 10:case"end":return n.stop()}}),n)})))()},onScrollBottom:function(){"search"===this.type?this.getSearchList():this.getList()},onFocus:function(){this.$refs.filterBar.close(),this.tarEvent("building_searchbar_click")},buildingSearch:function(e){e?e!=this.keyword&&(this.type="search",this.searchOption={page:1,more:!0},this.keyword=e,this.filterParams={},this.$refs.filterBar.reset(),this.listOptions={page:1,more:!0},this.getSearchList(!0)):"search"===this.type&&(this.listOptions={page:1,more:!0},this.keyword="",this.type="list",this.filterParams={},this.$refs.filterBar.reset(),this.getList())}})}},"46cd":function(e,t,n){(function(e,t){var r=n("4ea4");n("6cdc"),r(n("66fd"));var i=r(n("7b26"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("bc2e").default,n("543d").createPage)},7594:function(e,t,n){n.r(t);var r=n("34ab"),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t.default=i.a},"7b26":function(e,t,n){n.r(t);var r=n("0ae8"),i=n("7594");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("14a4");var o=n("f0c5"),s=Object(o.a)(i.default,r.b,r.c,!1,null,"de5d459a",null,!1,r.a,void 0);t.default=s.exports}},[["46cd","common/runtime","common/vendor","pages/building/common/vendor"]]]);